<!doctype html>
<html lang="en-US" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header">
<meta charset="utf-8"></meta>
<meta http-equiv="Content-Type" content="text/html"></meta>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!-- <link href="webjars/datatables/1.10.20/css/dataTables.bootstrap4.css" rel="stylesheet"> -->
<!-- <link href="webjars/datatables/1.10.20/css/dataTables.foundation.css" rel="stylesheet"> -->

<script src="webjars/jquery/3.4.1/jquery.js"></script>

<script src="webjars/datatables/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="webjars/datatables/1.10.20/js/dataTables.bootstrap.js"></script>
<link href="webjars/datatables/1.10.20/css/jquery.dataTables.min.css"
	rel="stylesheet">
<link href="bootstrap.min.css" rel="stylesheet">
<link href="bootstrap.css" rel="stylesheet">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" ></script>
<title>Capiza</title>
</head>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary"
	th:fragment="menu">
	<a class="navbar-brand"   style="height: 62px;width: 92px;" href="/"> <img style="max-width: 100%;max-height: 100%;" src="/img/logo.png"></img></a>
	<button class="navbar-toggler" type="button" data-toggle="collapse"
		data-target="#navbarColor01" aria-controls="navbarColor01"
		aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarColor01">
		<ul class="navbar-nav mr-auto">
			<li class="nav-item active"><a class="nav-link" href="/">Inicio
					<span class="sr-only">(current)</span>
			</a></li>
			<li class="nav-item"><a class="nav-link" href="/nuevoCaso">Nuevo
					Caso</a></li>
			<li class="nav-item"><a class="nav-link" href="/listaCasos">Consulta
					Casos</a></li>
			<li class="nav-item"><a class="nav-link"
				href="/listaPorDataTables">Lista Por DataTables</a></li>
		</ul>

	</div>
</nav>


<div th:fragment="casoPaciente" th:object="${paciente}">
	<input th:if="${paciente.id != null}" id="paciente" th:value="${paciente.id}"  th:field="${paciente.id}" type="hidden">
	<div class="row form-group">
		<div class="col-6 form-group">
			<label class="form-control-label" for="pnombre"><strong>Nombre</strong></label> <input
				id="pnombre" th:value="${paciente.nombre}"
				th:field="${paciente.nombre}" type="text" class="form-control">
		</div>
		<div class="col-6 form-group">
			<label class="form-control-label" for="papellido"><strong>Apellido</strong></label> <input
				id="papellido" th:value="${paciente.apellido}" type="text"  th:field="${paciente.apellido}" 
				class="form-control">
		</div>
	</div>

	<div class="row form-group">
		<div class="col-12 form-group">
			<label class="form-control-label" for="pdireccion"><strong>Direccion</strong></label>
			<input id="pdireccion" th:value="${paciente.direccion}"
				th:field="${paciente.direccion}" type="text" class="form-control">
		</div>

	</div>


	<div class="row form-group">
		<div class="col-6 form-group">
			<label for="genero"><strong>Genero</strong></label> <select th:field="*{genero}"
				class="form-control" id="genero">
				<option
					th:each="colorOpt : ${T(com.cenfotec.proyecto.domain.Paciente.Genero).values()}"
					value="" th:text="${colorOpt}" th:value="${colorOpt}"></option>
			</select>
		</div>



		<div class="col-6 form-group">
			<label for="tipoSangre"><strong>Tipo Sangre</strong></label> <select
				th:field="*{tipoSangre}" class="form-control" id="tipoSangre">
				<option
					th:each="colorOpt : ${T(com.cenfotec.proyecto.domain.Paciente.TipoSangre).values()}"
					value="1" th:text="${colorOpt}" th:value="${colorOpt}"></option>
			</select>
		</div>

	</div>

	<div class="row form-group">
		<div class="col-6 form-group">
			<label class="form-control-label" for="pestadoCivil"><strong>Estado
				Civil</strong></label> <select th:value="${paciente.estadoCivil}"
				th:field="${paciente.estadoCivil}" class="form-control"
				id="tipoSangre">
				<option value="Casado">Casado</option>
				<option value="Soltero">Soltero</option>
				<option value="Separado">Separado</option>
				<option value="Viudo">Viudo</option>

			</select>

		</div>
		<div class="col-6 form-group">
			<label class="form-control-label" for="pocupacion"><strong>Ocupacion</strong></label>
			<input id="pocupacion" th:value="${paciente.ocupacion}" type="text"
				th:field="${paciente.ocupacion}" class="form-control">
		</div>
	</div>
	<div class="row form-group">
		<div class="col-6 form-group">
			<label class="form-control-label" for="pfechaNacimento"><strong>Fecha Nacimiento</strong></label> <input
				id="pfechaNacimento" th:value="${paciente.fechaNacimiento}"
				th:field="${paciente.fechaNacimiento}" type="text" class="form-control">
		</div>
		<div class="col-6 form-group">
			<label class="form-control-label" for="ptelefono"><strong>Telefono</strong></label> <input onkeypress="return inputNumerico(event)" 
				id="ptelefono" th:value="${paciente.telefono}" type="text" th:field="${paciente.telefono}"
				class="form-control">
		</div>
	</div>




</div>

<script th:fragment="js">
inputNumerico=function (evt)
{
   var charCode = (evt.which) ? evt.which : event.keyCode
   if (charCode > 31 && (charCode < 48 || charCode > 57))
      return false;

   return true;
};


function validarCliente () {

    var cedula=$("#cedulaAValidar")[0].value;
    var url = '/pacientePorCedula/'+cedula;
    $('#datosPaciente').load(url,function(reponse){
    	console.log(reponse);
    		$("#pfechaNacimento")[0].value=(new Date($("#pfechaNacimento")[0].value)).toLocaleDateString('en-GB')
    	   $('#pfechaNacimento').datepicker({
    		   dateFormat: "dd/mm/yy",
    		   maxDate: "+0D"
    		   
    	   });
    	});
 
}


function actualizarEstadoCaso () {

    var cedula=$("#cedulaAValidar")[0].value;
    var url = '/pacientePorCedula/'+cedula;
    $('#datosPaciente').load(url,function(reponse){
    	console.log(reponse);
    		$("#pfechaNacimento")[0].value=(new Date($("#pfechaNacimento")[0].value)).toLocaleDateString('en-GB')
    	   $('#pfechaNacimento').datepicker({
    		   dateFormat: "dd/mm/yy",
    		   maxDate: "+0D"
    		   
    	   });
    	});
 
}
</script>